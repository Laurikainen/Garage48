<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Digital Happiness</title>
	<link rel="icon" href="assets/img/favicon16.png" />

    <link rel="stylesheet" href="assets/css/style.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>

<body id="particles-js">
    <header>
        <img src="assets/img/logo.png" alt="awesome logo">
    </header>
    <div class="container">
        <section id="feel" class="grid-card">
            <h1>How do you feel?</h1>
            <div class="grid">
                <a href="#" id="awesome"><img src="assets/img/awesome.jpg" alt="awesome">
                    <h3>Awesome</h3>
                </a>
                <a href="#" id="okay"><img src="assets/img/okay.jpeg" alt="okay">
                    <h3>Okay</h3>
                </a>
                <a href="#" id="bad"><img src="assets/img/bad.jpg" alt="bad">
                    <h3>Bad</h3>
                </a>
                <a href="#" id="vBad"><img src="assets/img/verybad.jpg" alt="very bad">
                    <h3>Very bad</h3>
                </a>
            </div>
        </section>
        <section id="witness" class="grid-card">
            <h1>Have you witnessed bullying during the past 2 weeks?</h1>
            <div class="grid">
                <a href="#" id="noIdea"><img src="assets/img/noidea.jpg" alt="awesome">
                    <h3>No idea what you are talking about</h3>
                </a>
                <a href="#" id="witnessed"><img src="assets/img/witness.jpg" alt="witness">
                    <h3>Witnessed something</h3>
                </a>
                <a href="#" id="happened"><img src="assets/img/happened.jpg" alt="bad">
                    <h3>Yes, happened to me</h3>
                </a>
                <a href="#" id="iBullied"><img src="assets/img/ibullied.jpg" alt="very bad">
                    <h3>I'm afraid I bullied someone</h3>
                </a>
            </div>
        </section>
        <section id="havebeen" class="grid-card">
            <h1>During the past 2 weeks, have you been...</h1>
            <div class="grid">
                <a href="#" id="nasty"><img src="assets/img/nasty.jpg" alt="nasty">
                    <h3>Sent or told nasty things</h3>
                </a>
                <a href="#" id="left"><img src="assets/img/leftout.jpg" alt="left out">
                    <h3>Left out</h3>
                </a>
                <a href="#" id="tagged"><img src="assets/img/tagged.jpg" alt="tagged">
                    <h3>Tagged without permission</h3>
                </a>
                <a href="#" id="scammed"><img src="assets/img/scam.jpg" alt="scammed">
                    <h3>Scammed</h3>
                </a>
                <a href="#" id="disturbed"><img src="assets/img/disturbed.jpg" alt="disturbed">
                    <h3>Disturbed with other forms of online bullying</h3>
                </a>
                <a href="#" id="safe"><img src="assets/img/safe.jpg" alt="safe">
                    <h3>Safe</h3>
                </a>
            </div>
        </section>
        <section id="confirmation" class="grid-card">
            <h1>Would you like to share your experience?</h1>
            <h3>Everything you say will be kept a secret.</h3>
            <div class="grid">
                <a href="#" id="yesPlease"><img src="assets/img/yes.jpg" alt="yes">
                    <h3>Yes, please</h3>
                </a>
                <a href="#" id="noThanks" onclick="SendData();"><img src="assets/img/no.jpg" alt="no">
                    <h3>No, thanks</h3>
                </a>
            </div>
        </section>
        <section id="form">
            <form>
                <h3 class="text">I think that <br>
                    <input type="text" name="who" id="who" placeholder="somebody" required> <br>
                    did something <br>
                    <div class="custom-select">
                        <select name="mood" id="mood" required>
                            <option value="">good/neutral/bad</option>
                            <option value="good">good</option>
                            <option value="neutral">neutral</option>
                            <option value="bad">bad</option>
                        </select>
                    </div>
                    to <input type="text" name="whom" id="whom" placeholder="somebody" required>
                    because
                    <textarea name="comment" id="comments" placeholder="Describe the situation..." cols="30"
                        rows="10"></textarea>
                </h3>
                <input class="button" type="submit" value="Report" id="sendReport" onclick="SendData();">
            </form>
        </section>
        <section id="done" class="grid-card">
            <h1>Woop! You're all done!</h1>
            <h3>Thank you for your feedback!</h3>
            <img style="width: 100%; max-width: 400px; border-radius: 10px;" src="assets/img/done.jpg" alt="done">
            <button class="button" onclick="$('body').fadeOut(350);location.reload();">Fill a new report</button>
        </section>
    </div>
</body>

<script src="assets/js/transition.js"></script>
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

<script>
    var x, i, j, selElmnt, a, b, c;
    /*look for any elements with the class "custom-select":*/
    x = document.getElementsByClassName("custom-select");
    for (i = 0; i < x.length; i++) {
        selElmnt = x[i].getElementsByTagName("select")[0];
        /*for each element, create a new DIV that will act as the selected item:*/
        a = document.createElement("DIV");
        a.setAttribute("class", "select-selected");
        a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
        x[i].appendChild(a);
        /*for each element, create a new DIV that will contain the option list:*/
        b = document.createElement("DIV");
        b.setAttribute("class", "select-items select-hide");
        for (j = 1; j < selElmnt.length; j++) {
            /*for each option in the original select element,
            create a new DIV that will act as an option item:*/
            c = document.createElement("DIV");
            c.innerHTML = selElmnt.options[j].innerHTML;
            c.addEventListener("click", function (e) {
                /*when an item is clicked, update the original select box,
                and the selected item:*/
                var y, i, k, s, h;
                s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                h = this.parentNode.previousSibling;
                for (i = 0; i < s.length; i++) {
                    if (s.options[i].innerHTML == this.innerHTML) {
                        s.selectedIndex = i;
                        h.innerHTML = this.innerHTML;
                        y = this.parentNode.getElementsByClassName("same-as-selected");
                        for (k = 0; k < y.length; k++) {
                            y[k].removeAttribute("class");
                        }
                        this.setAttribute("class", "same-as-selected");
                        break;
                    }
                }
                h.click();
            });
            b.appendChild(c);
        }
        x[i].appendChild(b);
        a.addEventListener("click", function (e) {
            /*when the select box is clicked, close any other select boxes,
            and open/close the current select box:*/
            e.stopPropagation();
            closeAllSelect(this);
            this.nextSibling.classList.toggle("select-hide");
            this.classList.toggle("select-arrow-active");
        });
    }

    function closeAllSelect(elmnt) {
        /*a function that will close all select boxes in the document,
        except the current select box:*/
        var x, y, i, arrNo = [];
        x = document.getElementsByClassName("select-items");
        y = document.getElementsByClassName("select-selected");
        for (i = 0; i < y.length; i++) {
            if (elmnt == y[i]) {
                arrNo.push(i)
            } else {
                y[i].classList.remove("select-arrow-active");
            }
        }
        for (i = 0; i < x.length; i++) {
            if (arrNo.indexOf(i)) {
                x[i].classList.add("select-hide");
            }
        }
    }
    /*if the user clicks anywhere outside the select box,
    then close all select boxes:*/
    document.addEventListener("click", closeAllSelect);

    let feel, bullying, me, who, did, whom, why = 0;
    let icon = 'assets/img/thinking.png';
    $.getScript('assets/js/particles.js');

    $('#feel #awesome').click(function () {
        feel = 99;
        icon = 'assets/img/unicorn.png';
        $.getScript('assets/js/particles.js');
    })
    $('#feel #okay').click(function () {
        feel = 66;
        icon = 'assets/img/okay.png';
        $.getScript('assets/js/particles.js');
    })
    $('#feel #bad').click(function () {
        feel = 33;
        icon = 'assets/img/sad.png';
        $.getScript('assets/js/particles.js');
    })
    $('#feel #vBad').click(function () {
        feel = 1;
        icon = 'assets/img/vsad.png';
        $.getScript('assets/js/particles.js');
    })

    $('#witness a').click(function (event) {
        bullying = $(this).attr('id');
    })

    $('#havebeen a').click(function (event) {
        me = $(this).attr('id');
    })

    function SendData() {

        var data = {
            "feel": feel,
            "bullying": bullying,
            "me": me,
            "who": $('#who').val(),
            "did": $('#mood').val(),
            "whom": $('#whom').val(),
            "why": $('#comments').val()
        }
        fetch('https://growby.app/slide', {
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            method: "POST",
            body: JSON.stringify(data)
        });
    }
</script>

</html>